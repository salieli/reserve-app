(function(e){function t(t){for(var n,o,s=t[0],c=t[1],u=t[2],f=0,p=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={user:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([5,"chunk-vendors","chunk-common"]),r()})({"1dad":function(e,t,r){"use strict";r("cb7d")},"1ff1":function(e,t,r){},5:function(e,t,r){e.exports=r("f609")},cb7d:function(e,t,r){},f609:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[r("el-header",{staticStyle:{"font-size":"12px",height:"initial","border-bottom":"1px solid #ebebeb"}},[r("HeaderBar")],1),r("el-container",{staticStyle:{height:"calc(100% - 161px)"}},[r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)","overflow-x":"hidden"}},[r("LeftMenu",{attrs:{active:e.active}})],1),r("el-container",[r("el-header",{staticStyle:{"font-size":"2rem",height:"30px","margin-top":"20px"}},[e._v(" 用户管理"),r("span",{staticClass:"text-md text-gray"},[r("el-button",{staticStyle:{padding:"3px 0",width:"auto"},attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")])],1),r("UserIdentity",{attrs:{user:e.user}})],1),r("el-main",{staticStyle:{"padding-top":"10px"}},e._l(e.list,(function(t){return r("ManagerItem",{key:t.id,staticClass:"margin-bottom-item",attrs:{data:t,user:e.user,isUser:!0},on:{refresh:e.dataChange,showAuthorizeDialog:e.showAuthorizeDialog}})})),1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名称",required:"",prop:"name"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"输入用户名，密码默认123456"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1),r("AuthorizeForm",{attrs:{placeListOption:e.placeListOption,visible:e.authorizeDialogVisible,user:e.otherUser,isSuperuser:e.user.isSuperuser},on:{hide:e.hideAuthorizeDialog}})],1)},i=[],o=(r("99af"),r("4de4"),r("b0c0"),r("96cf"),r("1da1")),s=r("2096"),c=r("110b"),u=r("e5a6"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"授权"+e.user.name,visible:e.visible,center:""},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{attrs:{"label-width":"100px",center:""}},[e.isSuperuser?r("el-form-item",{attrs:{label:"设置为管理员:"}},[r("el-radio-group",{model:{value:e.isStaff,callback:function(t){e.isStaff=t},expression:"isStaff"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"只能查看场地:"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择该用户只能查看的场地"},on:{"remove-tag":e.removeTag},model:{value:e.placeList,callback:function(t){e.placeList=t},expression:"placeList"}},e._l(e.placeOption,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.disabled}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.hide(!1)}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},f=[],p=(r("4160"),r("c975"),r("a15b"),r("d81d"),r("159b"),{props:{isSuperuser:Boolean,placeListOption:Array,visible:Boolean,user:Object},watch:{user:function(e){var t=this;this.isStaff=!0===e.isStaff?"1":"0",this.placeList=e.placeIdList;var r=this.placeListOption.map((function(e){return e.id})),n=this.allPlaceList.filter((function(e){return-1!=t.placeList.indexOf(e.id)&&-1===r.indexOf(e.id)})).map((function(e){return e.disabled=!0,e}));this.placeOption=n.concat(this.placeListOption)}},data:function(){return{placeOption:this.placeListOption,isStaff:!0===this.user.isStaff?"1":"0",placeList:this.user.placeIdList,ownPlaceIdList:[],allPlaceList:[]}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$PlaceManager.getPlaceList();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),!1,!1);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return e.ownPlaceIdList=t.t0,t.next=8,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$PlaceManager.getAll();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),!1,!1);case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1=[];case 11:e.allPlaceList=t.t1;case 12:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},methods:{onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$UserManager.authorize({isStaff:"1"===e.isStaff,userId:e.user.id,placeIdList:e.placeList.length>0?e.placeList.join(","):"0"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))));case 2:r=t.sent,r&&e.hide(!0);case 4:case"end":return t.stop()}}),t)})))()},hide:function(e){this.$emit("hide",e)},removeTag:function(e){var t=!1;this.ownPlaceIdList.forEach((function(r){r.id===e&&(t=!0)})),t||(this.$message.warning("没有该场地操作权限！"),this.placeList=this.placeList.concat([e]))}}}),d=p,m=(r("f87a"),r("2877")),h=Object(m["a"])(d,l,f,!1,null,"0aa43481",null),b=h.exports,g=r("90e4"),v=r("f8b7"),x={name:"app",components:{ManagerItem:s["a"],LeftMenu:c["a"],HeaderBar:u["a"],AuthorizeForm:b,UserIdentity:g["a"]},data:function(){return{user:{},otherUser:{},active:"2-2",list:[],placeListOption:[],authorizeDialogVisible:!1,dialogFormVisible:!1,form:{name:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}]}}},created:function(){var e=this;v["a"].$on("setUser",(function(t){e.user=t}))},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(!1);case 2:return t.next=4,e.$exec(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$PlaceManager.getPlaceList();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),!1,!1);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0=[];case 7:e.placeListOption=t.t0;case 8:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},methods:{dataChange:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},hideAuthorizeDialog:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.authorizeDialogVisible=!1,!e){r.next=4;break}return r.next=4,t.getData();case 4:case"end":return r.stop()}}),r)})))()},showAuthorizeDialog:function(e){this.authorizeDialogVisible=!0,this.otherUser=e},getData:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],r.next=3,t.$exec(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$UserManager.getAll();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),!1,n);case 3:a=r.sent,a&&(t.list=a.filter((function(e){return!0===e.isStaff})).concat(a.filter((function(e){return!1===e.isStaff&&e.placeIdList.length>0}))).concat(a.filter((function(e){return!1===e.isStaff&&0===e.placeIdList.length}))));case 5:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n){r.next=7;break}return r.next=3,t.$exec(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$UserManager.add(t.form.name);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),"添加用户成功");case 3:a=r.sent,a&&(t.$refs[e].resetFields(),t.getData()),r.next=9;break;case 7:return console.log("error submit!!"),r.abrupt("return",!1);case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}}},w=x,O=(r("1dad"),Object(m["a"])(w,a,i,!1,null,null,null)),y=O.exports,k=(r("7378"),r("21ce"));n["default"].config.productionTip=!1,n["default"].prototype.$ObjectManager=k["e"],n["default"].prototype.$UserManager=k["e"],n["default"].prototype.$PlaceManager=k["b"],n["default"].prototype.$exec=k["f"],new n["default"]({render:function(e){return e(y)}}).$mount("#app")},f87a:function(e,t,r){"use strict";r("1ff1")}});